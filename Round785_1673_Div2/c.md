Бодолт: $n$-ын хязгаарлалт бага байгаа тул бид бүх тооны хувьд тооцоолж чадна.

Үүний тулд эхлээд палиндром $40000$-оос бага тоонуудаа олно. (Нийт $M=498$ тоо байгаа)

$dp_{k,m}$-ээр $k$ тоог эхний $m$ ширхэг анхны тоогоор задлах боломжийн тоог тэмдэглэе. Тэгвэл $dp_{k,m}=dp_{k,m-1}+dp_{k-{p_m},m}$ байна, энд $p_m$-ээр $m$ дэх палиндром тоог тэмдэглэе. Эхний хэсэг нь эхний $m-1$ палиндрам тоог ашигласан тоо, 2 дахь хэсэг нь ядаж нэг удаа $p_m$ тоо ядаж нэг удаа орсон тоо болох тул тохирно. Суурь тохиолдолд $dp_{k,1}=1$ ба $dp_{1,m}=1$ байна. Одоо ямар ч $n$-ын хувьд хариу $dp_{n,M}$ байна.

Ажиллах хугацаа ба санах ой $O(max(n)M)$ байна.

By: Irmuun
